# reView

[![GitHub Pytests](https://github.com/NREL/reView/workflows/Pytests/badge.svg)](https://github.com/NREL/reView/actions?query=workflow%3A%22Pytests%22)
[![GitHub Super-Linter](https://github.com/NREL/reView/workflows/Lint%20Code%20Base/badge.svg)](https://github.com/marketplace/actions/super-linter)
[![codecov](https://codecov.io/gh/NREL/reView/branch/main/graph/badge.svg)](https://codecov.io/gh/NREL/reView)

`reView` is a data portal for reviewing outputs from the National Renewable Energy Laboratory's ([NREL](https://www.nrel.gov/)) Renewable Energy Potential Model ([reV](https://github.com/NREL/reV)). It is currently limited to tables generated by the [reV Supply Curve](https://nrel.github.io/reV/_autosummary/reV.supply_curve.html) module, which provide [technical potential](https://www.nrel.gov/gis/re-potential.html) data for a given technology under a set of land-use, technology performance, and cost assumptions. Once a user has generated tables with`reV`, `reView` allows that user to view the data as an interactive map linked to an interactive graph, allowing for quick exploration of `reV` outputs. Other functionality allows the user to filter the dataset based on variable thresholds, calculate differences between two tables, compare multiple tables in one chart, group results by region, and calculate least-cost scenarios at each point. More functionality is coming soon.

<br>

## Installation
1. Clone the `reView` repository.

    Using ssh:
    ```
    git clone git@github.com:NREL/reView.git
    ```
    Using https:
    ```
    git clone https://github.com/NREL/reView.git
    ```

2. Create and activate conda environment:
    1) Create a conda env: ``conda create -n review python=3.9``
    2) Run the command: ``conda activate review``
    3) cd into the repository: ``cd reView``.
    4) prior to running ``pip`` below, make sure the branch is correct (install from main!)
    5) Install ``reView`` and its dependencies by running:
       ``pip install -e .`` (or ``pip install -e '.[dev]'`` if running a dev branch or working on the source code)

3. Create a project config pointing to directory containing reV supply curve tables. Save as json dictionary in configs/ (e.g. configs/sample.json). If the user doesn't have reV data, they can get started with supply-curves for NREL's [standard scenarios](https://www.nrel.gov/analysis/standard-scenarios.html) based on the [Electricity Annual Technology Baseline](https://atb.nrel.gov/electricity/2021/data) through NREL's Geospatial Data Science group. Supply curves for wind power are available [here](https://www.nrel.gov/gis/wind-supply-curves.html) and those for solar photovoltaic power are available [here](https://www.nrel.gov/gis/solar-supply-curves.html).
```
{
    "project_name": <"Your Project Name>",
    "directory": <"Local path to folder containing reV supply curve tables">
}
```
<br>

## Running reView
1. Run the ``reView`` command:
    ```
    reView
    ```
2. Open your browser and enter the URL output from command above. The default port is 8050.
    ```
    http://localhost:8050
    ```
<br>

## Running reView with [Gunicorn](https://gunicorn.org/) (Unix only)

1. To run `reView` using `gunicorn` (a Python WSGI HTTP Server for UNIX) for better performance, make sure to follow the installation steps as outlined above, but when you get to the last step of #2, include the `gunicorn` dependency:
    ```
    pip install -e '.[gunicorn]'
    ```
    or, for more development tools:
    ```
    pip install -e '.[dev,gunicorn]'
    ```

2. Run `reView` using `gunicorn`:
    ```
    cd reView
    gunicorn index:server
    ```

3. Open your browser and enter the URL output from command above. The default port is 9875.
    ```
    http://localhost:9875
    ```
<br>

## Command-Line Tools

Additional command-line tools are available as part of this package. A list of these tools can be accessed using the command `reView-tools`. More information on usage of these command-line tools can be found in the [Usage](USAGE.md) documentation.
----

## Development

This repository uses [pylint](https://pylint.pycqa.org/en/latest/) to lint the code, please follow this guideline if you wish to contribute to this repository. In addition, your code must pass all existing tests. You will need to
[download the Chrome Driver](https://chromedriver.chromium.org/getting-started) in order to run the integration tests
included with this repository.

Before pushing code, the following commands should be run to ensure GitHub actions will succeed:
```cmd
pylint reView
pylint tests

flake8 reView
flake8 tests

pytest
```

